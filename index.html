<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Perceptrón Interactivo - Iteraciones</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
.tab { overflow: hidden; border-bottom: 1px solid #ccc; }
.tab button { background-color: inherit; border: none; outline: none; cursor: pointer; padding: 10px 20px; transition: 0.3s; }
.tab button:hover { background-color: #ddd; }
.tab button.active { background-color: #ccc; }
.tabcontent { display: none; padding: 10px 0; }
.plot-container { width: 700px; height: 600px; margin-bottom: 10px; }
.controls { margin-bottom: 10px; }
</style>
</head>
<body>

<h1>Perceptrón Interactivo - Iteraciones</h1>

<div class="tab" id="tabButtons"></div>
<div id="tabContents"></div>

<script>
// =================== DATOS EMBEBIDOS ===================
const datasets = 
// Pega aquí el contenido de tu JSON, solo el objeto, sin comentarios ni llaves extra
{
"Dataset1": {
    "con": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.6589,
            0.20211999999999997
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          1.0
        ],
        "errores": [
          12.0,
          2.909938860635638
        ],
        "w_best": [
          -0.6589,
          0.20211999999999997
        ],
        "b_best": 1.0,
        "error_best": 2.909938860635638
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.06959800000000001,
            -0.039964
          ],
          [
            -0.16384800000000002,
            -0.096296
          ],
          [
            -0.23344600000000004,
            -0.13626
          ],
          [
            -0.24297200000000005,
            -0.13829999999999998
          ],
          [
            -0.2671160000000001,
            -0.15054599999999999
          ],
          [
            -0.2938980000000001,
            -0.11386399999999999
          ],
          [
            -0.3180420000000001,
            -0.12611
          ],
          [
            -0.3275680000000001,
            -0.12815
          ],
          [
            -0.30367600000000006,
            -0.04914599999999998
          ],
          [
            -0.31320200000000004,
            -0.05118599999999998
          ],
          [
            -0.322728,
            -0.05322599999999998
          ],
          [
            -0.346872,
            -0.06547199999999997
          ],
          [
            -0.342656,
            -0.0011739999999999806
          ],
          [
            -0.3668,
            -0.01341999999999998
          ],
          [
            -0.390944,
            -0.02566599999999998
          ],
          [
            -0.40047,
            -0.02770599999999998
          ],
          [
            -0.42486599999999997,
            0.026806000000000024
          ],
          [
            -0.4638459999999999,
            0.07477800000000003
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.98,
          0.96,
          0.94,
          0.9199999999999999,
          0.8999999999999999,
          0.8999999999999999,
          0.8799999999999999,
          0.8599999999999999,
          0.8799999999999999,
          0.8599999999999999,
          0.8399999999999999,
          0.8199999999999998,
          0.8199999999999998,
          0.7999999999999998,
          0.7799999999999998,
          0.7599999999999998,
          0.7399999999999998,
          0.6799999999999997
        ],
        "errores": [
          12.0,
          9.139924065985888,
          6.5001415308342185,
          5.405608045633511,
          5.252218292560243,
          5.058119409606242,
          4.690666546380467,
          4.592093413147916,
          4.5531645976174895,
          4.359684590341423,
          4.22943189660887,
          4.121373162419259,
          4.022321251227183,
          3.7904640134566474,
          3.647166960885052,
          3.612329147713978,
          3.6053291238791347,
          3.210249158645843,
          2.883287352975554
        ],
        "w_best": [
          -0.4638459999999999,
          0.07477800000000003
        ],
        "b_best": 0.6799999999999997,
        "error_best": 2.883287352975554
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.0009526000000000001,
            -0.000204
          ],
          [
            -0.0019052000000000001,
            -0.000408
          ],
          [
            -0.008865000000000001,
            -0.0044044
          ],
          [
            -0.0158248,
            -0.0084008
          ],
          [
            -0.021339,
            -0.012387
          ],
          [
            -0.0237534,
            -0.0136116
          ],
          [
            -0.0261678,
            -0.014836199999999999
          ],
          [
            -0.0331276,
            -0.018832599999999998
          ],
          [
            -0.035542,
            -0.020057199999999997
          ],
          [
            -0.0425018,
            -0.024053599999999998
          ],
          [
            -0.0519268,
            -0.0296868
          ],
          [
            -0.061351800000000005,
            -0.03532
          ],
          [
            -0.06686600000000001,
            -0.0393062
          ],
          [
            -0.07474440000000002,
            -0.0415126
          ],
          [
            -0.07569700000000001,
            -0.0417166
          ],
          [
            -0.08357540000000002,
            -0.043923
          ],
          [
            -0.08908960000000002,
            -0.0479092
          ],
          [
            -0.09696800000000003,
            -0.050115599999999996
          ],
          [
            -0.10248220000000002,
            -0.0541018
          ],
          [
            -0.10799640000000002,
            -0.058088
          ],
          [
            -0.11495620000000002,
            -0.0620844
          ],
          [
            -0.12283460000000002,
            -0.0642908
          ],
          [
            -0.12524900000000003,
            -0.0655154
          ],
          [
            -0.13467400000000002,
            -0.0711486
          ],
          [
            -0.14255240000000002,
            -0.073355
          ],
          [
            -0.1495122,
            -0.0773514
          ],
          [
            -0.15192660000000002,
            -0.07857600000000001
          ],
          [
            -0.1588864,
            -0.0825724
          ],
          [
            -0.16676480000000002,
            -0.0847788
          ],
          [
            -0.17227900000000002,
            -0.088765
          ],
          [
            -0.17469340000000003,
            -0.0899896
          ],
          [
            -0.18257180000000003,
            -0.092196
          ],
          [
            -0.19045020000000004,
            -0.0944024
          ],
          [
            -0.19140280000000004,
            -0.0946064
          ],
          [
            -0.19691700000000004,
            -0.09859259999999999
          ],
          [
            -0.20387680000000002,
            -0.10258899999999999
          ],
          [
            -0.21175520000000003,
            -0.10479539999999998
          ],
          [
            -0.21270780000000003,
            -0.10499939999999998
          ],
          [
            -0.21822200000000003,
            -0.10898559999999997
          ],
          [
            -0.21917460000000002,
            -0.10918959999999997
          ],
          [
            -0.22468880000000002,
            -0.11317579999999997
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.998,
          0.996,
          0.994,
          0.992,
          0.99,
          0.988,
          0.986,
          0.984,
          0.982,
          0.98,
          0.978,
          0.976,
          0.974,
          0.972,
          0.97,
          0.968,
          0.966,
          0.964,
          0.962,
          0.96,
          0.958,
          0.956,
          0.954,
          0.952,
          0.95,
          0.948,
          0.946,
          0.944,
          0.942,
          0.94,
          0.938,
          0.9359999999999999,
          0.9339999999999999,
          0.9319999999999999,
          0.9299999999999999,
          0.9279999999999999,
          0.9259999999999999,
          0.9239999999999999,
          0.9219999999999999,
          0.9199999999999999,
          0.9179999999999999
        ],
        "errores": [
          12.0,
          11.941018451157714,
          11.88225884191086,
          11.564950183876011,
          11.255163905608882,
          10.997791566979046,
          10.882346296379229,
          10.767985618173416,
          10.477969590179239,
          10.367545482132131,
          10.087903811670367,
          9.725463438161508,
          9.376673959820785,
          9.16316989650379,
          8.913663690561947,
          8.868541485341368,
          8.627005361171364,
          8.432614864519,
          8.203994894230329,
          8.021457582567153,
          7.844622441898377,
          7.641516878271018,
          7.439063127712432,
          7.364285139206585,
          7.118336277944492,
          6.934897636981138,
          6.766497579314526,
          6.702186336212575,
          6.544160636078379,
          6.3843754103110015,
          6.265107515384392,
          6.209905315347676,
          6.06572641506315,
          5.928312654665169,
          5.903286677769014,
          5.805614650812046,
          5.693623115884452,
          5.577429503107057,
          5.556214597532919,
          5.478049038221624,
          5.458165439923563,
          5.386811419287316
        ],
        "w_best": [
          -0.22468880000000002,
          -0.11317579999999997
        ],
        "b_best": 0.9179999999999999,
        "error_best": 5.386811419287316
      }
    ],
    "sin": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.2197,
            0.24504000000000004
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          2.7264840329120283
        ],
        "w_best": [
          -0.2197,
          0.24504000000000004
        ],
        "b_best": 0.0,
        "error_best": 2.7264840329120283
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.023892000000000004,
            0.079004
          ],
          [
            -0.054892,
            0.056940000000000004
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.716267951766499,
          4.660883989715852
        ],
        "w_best": [
          -0.054892,
          0.056940000000000004
        ],
        "b_best": 0.0,
        "error_best": 4.660883989715852
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.0031327999999999994,
            -0.0007628000000000005
          ],
          [
            -0.0027263999999999995,
            0.0030787999999999996
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          5.467142327048167,
          5.454896707007487
        ],
        "w_best": [
          -0.0027263999999999995,
          0.0030787999999999996
        ],
        "b_best": 0.0,
        "error_best": 5.454896707007487
      }
    ]
  },
  "Dataset2": {
    "con": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.5497000000000001,
            0.1016999999999999
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          1.0
        ],
        "errores": [
          12.0,
          3.8304900535194095
        ],
        "w_best": [
          -0.5497000000000001,
          0.1016999999999999
        ],
        "b_best": 1.0,
        "error_best": 3.8304900535194095
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            -0.009526,
            -0.04204
          ],
          [
            -0.064668,
            -0.12190200000000001
          ],
          [
            -0.07419400000000001,
            -0.163942
          ],
          [
            -0.152978,
            -0.226006
          ],
          [
            -0.153308,
            -0.20601799999999998
          ],
          [
            -0.138942,
            -0.12905399999999997
          ],
          [
            -0.18018,
            -0.09247399999999997
          ],
          [
            -0.21143,
            -0.05333199999999999
          ],
          [
            -0.26657200000000003,
            -0.13319399999999998
          ],
          [
            -0.25220600000000004,
            -0.05622999999999998
          ],
          [
            -0.261732,
            -0.09826999999999998
          ],
          [
            -0.27151000000000003,
            -0.07355199999999998
          ],
          [
            -0.28891599999999995,
            -0.01766799999999994
          ],
          [
            -0.29844199999999993,
            -0.05970799999999994
          ]
        ],
        "sesgos": [
          1.0,
          0.98,
          0.96,
          0.94,
          0.9199999999999999,
          0.9199999999999999,
          0.9199999999999999,
          0.9199999999999999,
          0.9199999999999999,
          0.8999999999999999,
          0.8999999999999999,
          0.8799999999999999,
          0.8599999999999999,
          0.7799999999999998,
          0.7599999999999998
        ],
        "errores": [
          9.956480962683797,
          6.842341072108735,
          6.362475672408912,
          6.302686107732297,
          5.980102804857035,
          5.591379741387388,
          5.233400686232019,
          5.119476812935048,
          4.753491355602373,
          4.562516444816238,
          4.476746767001561,
          4.304642878778658,
          4.035631800219917,
          4.025184165717982
        ],
        "w_best": [
          -0.29844199999999993,
          -0.05970799999999994
        ],
        "b_best": 0.7599999999999998,
        "error_best": 4.025184165717982
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            -0.0078784,
            -0.006206400000000001
          ],
          [
            -0.014838200000000001,
            -0.014202800000000002
          ],
          [
            -0.021798,
            -0.022199200000000002
          ],
          [
            -0.027312200000000002,
            -0.0301854
          ],
          [
            -0.0351906,
            -0.0363918
          ],
          [
            -0.042150400000000005,
            -0.0443882
          ],
          [
            -0.05157540000000001,
            -0.054021400000000004
          ],
          [
            -0.053989800000000004,
            -0.05924600000000001
          ],
          [
            -0.061868200000000005,
            -0.06545240000000001
          ],
          [
            -0.06738240000000001,
            -0.0734386
          ],
          [
            -0.07526080000000002,
            -0.07964500000000001
          ],
          [
            -0.08222060000000002,
            -0.08764140000000001
          ],
          [
            -0.08463500000000002,
            -0.092866
          ],
          [
            -0.09159480000000002,
            -0.1008624
          ],
          [
            -0.09254740000000002,
            -0.1050664
          ],
          [
            -0.10042580000000001,
            -0.1112728
          ],
          [
            -0.10738560000000001,
            -0.1192692
          ],
          [
            -0.11289980000000001,
            -0.12725540000000002
          ],
          [
            -0.11985960000000001,
            -0.13525180000000003
          ],
          [
            -0.1253738,
            -0.14323800000000003
          ],
          [
            -0.12994440000000002,
            -0.139334
          ],
          [
            -0.1330694,
            -0.1354198
          ],
          [
            -0.1409478,
            -0.1416262
          ],
          [
            -0.1419004,
            -0.14583020000000002
          ],
          [
            -0.14431480000000002,
            -0.15105480000000002
          ],
          [
            -0.14696800000000002,
            -0.1337064
          ],
          [
            -0.1510456,
            -0.1339962
          ],
          [
            -0.1519982,
            -0.1382002
          ],
          [
            -0.1546764,
            -0.13453199999999998
          ]
        ],
        "sesgos": [
          1.0,
          0.998,
          0.996,
          0.994,
          0.992,
          0.99,
          0.988,
          0.986,
          0.984,
          0.982,
          0.98,
          0.978,
          0.976,
          0.974,
          0.972,
          0.97,
          0.968,
          0.966,
          0.964,
          0.962,
          0.96,
          0.96,
          0.96,
          0.958,
          0.956,
          0.954,
          0.956,
          0.954,
          0.952,
          0.952
        ],
        "errores": [
          11.469660477323803,
          10.922647632522073,
          10.40253696884834,
          9.950875786677107,
          9.512755490715303,
          9.068771682277221,
          8.547268465466994,
          8.339261236565033,
          7.990481920868419,
          7.678116564688278,
          7.373411761957505,
          7.078455329926824,
          6.9365375975412,
          6.683872029793918,
          6.603597072462147,
          6.392475836643194,
          6.2021872883119435,
          6.0588850429404335,
          5.920650992970559,
          5.826041518119956,
          5.780195548386629,
          5.752427267456185,
          5.649272845063825,
          5.634549576328187,
          5.6121954029762176,
          5.587048906775938,
          5.537775275763303,
          5.521427296472896,
          5.494742368321613
        ],
        "w_best": [
          -0.1546764,
          -0.13453199999999998
        ],
        "b_best": 0.952,
        "error_best": 5.494742368321613
      }
    ],
    "sin": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ]
        ],
        "sesgos": [
          0.0,
          0.0
        ],
        "errores": [
          5.5
        ],
        "w_best": [
          0.0,
          0.0
        ],
        "b_best": 0.0,
        "error_best": 5.5
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.004064,
            0.078416
          ],
          [
            -0.051078,
            -0.0014460000000000028
          ],
          [
            -0.06803999999999999,
            0.06789
          ],
          [
            -0.077566,
            0.025850000000000005
          ],
          [
            -0.083028,
            0.062226000000000004
          ],
          [
            -0.13011999999999999,
            0.013514000000000012
          ],
          [
            -0.16136999999999999,
            0.05265600000000002
          ],
          [
            -0.207154,
            0.04492600000000002
          ],
          [
            -0.18832000000000002,
            0.11943000000000004
          ],
          [
            -0.19784600000000002,
            0.07739000000000004
          ],
          [
            -0.19300600000000004,
            0.11231400000000005
          ],
          [
            -0.20286200000000004,
            0.09026200000000006
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.967635431915762,
          4.997634654498373,
          4.7219699140395,
          4.6145271840489155,
          4.516474282524109,
          4.359011235009591,
          3.8486513681458474,
          3.7367053811905606,
          3.530805787071146,
          3.492373795163206,
          3.4676303393078176,
          3.407651162200354
        ],
        "w_best": [
          -0.20286200000000004,
          0.09026200000000006
        ],
        "b_best": 0.0,
        "error_best": 3.407651162200354
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            0.0004064,
            0.0078416
          ],
          [
            -0.005107799999999999,
            -0.00014459999999999994
          ],
          [
            -0.0112286,
            0.0009679999999999992
          ],
          [
            -0.015807,
            0.00019499999999999726
          ],
          [
            -0.014049400000000002,
            0.007513999999999997
          ],
          [
            -0.014580400000000002,
            0.0097398
          ],
          [
            -0.0169948,
            0.0045152000000000005
          ],
          [
            -0.0201276,
            0.0037523999999999995
          ],
          [
            -0.0201528,
            0.010428200000000002
          ],
          [
            -0.02377600000000001,
            0.007996200000000007
          ],
          [
            -0.024761600000000012,
            0.005791000000000008
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          5.492408315503157,
          5.441556481666984,
          5.369722495656784,
          5.322635580121861,
          5.32061486297161,
          5.310082897387591,
          5.29533573251804,
          5.263794162702563,
          5.244939025413413,
          5.211015445138839,
          5.207467075220342
        ],
        "w_best": [
          -0.024761600000000012,
          0.005791000000000008
        ],
        "b_best": 0.0,
        "error_best": 5.207467075220342
      }
    ]
  },
  "Dataset3": {
    "con": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            -0.54144,
            -0.72246
          ],
          [
            0.042159999999999975,
            0.6429800000000002
          ],
          [
            -0.8597000000000001,
            0.4638200000000001
          ]
        ],
        "sesgos": [
          1.0,
          0.8,
          1.0,
          1.0
        ],
        "errores": [
          127.41447593956576,
          112.69846776368317,
          4.127830732496806
        ],
        "w_best": [
          -0.8597000000000001,
          0.4638200000000001
        ],
        "b_best": 1.0,
        "error_best": 4.127830732496806
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.09959799999999999,
            -0.099964
          ],
          [
            -0.21011999999999997,
            -0.12717599999999996
          ],
          [
            -0.15630599999999997,
            -0.03494199999999996
          ],
          [
            -0.19583199999999998,
            -0.09698199999999996
          ],
          [
            -0.23262199999999997,
            -0.06823399999999996
          ],
          [
            -0.23808399999999993,
            -0.03185799999999994
          ],
          [
            -0.23841399999999993,
            -0.01186999999999995
          ],
          [
            -0.3241379999999999,
            -0.02498599999999998
          ],
          [
            -0.32446799999999987,
            -0.0049979999999999886
          ],
          [
            -0.3299299999999999,
            0.03137800000000002
          ],
          [
            -0.3425719999999999,
            0.07499200000000004
          ],
          [
            -0.3677319999999999,
            0.08991600000000004
          ],
          [
            -0.3887539999999999,
            0.12236800000000003
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.98,
          0.96,
          0.98,
          0.96,
          0.96,
          0.96,
          0.96,
          0.94,
          0.94,
          0.94,
          0.9199999999999999,
          0.8999999999999999,
          0.8799999999999999
        ],
        "errores": [
          12.0,
          5.621059300588014,
          5.417038826579567,
          5.16186711260538,
          4.779253416720074,
          4.3610256659648305,
          4.0426821309932865,
          4.026078105236133,
          3.9331485268871673,
          3.609517352491183,
          3.285000441624842,
          3.18660898312028,
          2.984144444738524,
          2.921024223148323
        ],
        "w_best": [
          -0.3887539999999999,
          0.12236800000000003
        ],
        "b_best": 0.8799999999999999,
        "error_best": 2.921024223148323
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.008514200000000001,
            -0.0099862
          ],
          [
            -0.017028400000000003,
            -0.0199724
          ],
          [
            -0.026988200000000004,
            -0.0299688
          ],
          [
            -0.032402600000000004,
            -0.0371934
          ],
          [
            -0.0409168,
            -0.0471796
          ],
          [
            -0.049431,
            -0.0571658
          ],
          [
            -0.0603094,
            -0.0653722
          ],
          [
            -0.0688236,
            -0.0753584
          ],
          [
            -0.079702,
            -0.08356480000000001
          ],
          [
            -0.092127,
            -0.095198
          ],
          [
            -0.1030054,
            -0.10340440000000001
          ],
          [
            -0.1084198,
            -0.110629
          ],
          [
            -0.1115448,
            -0.1067148
          ],
          [
            -0.1169592,
            -0.1139394
          ],
          [
            -0.11921580000000001,
            -0.1038414
          ],
          [
            -0.12189400000000002,
            -0.1001732
          ],
          [
            -0.12500340000000004,
            -0.0935176
          ],
          [
            -0.12895600000000004,
            -0.09972160000000001
          ],
          [
            -0.12898120000000005,
            -0.09304580000000001
          ],
          [
            -0.13439560000000006,
            -0.10027040000000001
          ],
          [
            -0.13981000000000005,
            -0.10749500000000001
          ],
          [
            -0.13938840000000002,
            -0.10106520000000001
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.998,
          0.996,
          0.994,
          0.992,
          0.99,
          0.988,
          0.986,
          0.984,
          0.982,
          0.98,
          0.978,
          0.976,
          0.976,
          0.974,
          0.974,
          0.974,
          0.972,
          0.97,
          0.97,
          0.968,
          0.966,
          0.966
        ],
        "errores": [
          12.0,
          11.046581925868281,
          10.16878128235313,
          9.306710184868919,
          8.801048898270885,
          8.13203532752135,
          7.538639187388379,
          6.992301493243273,
          6.549766971056472,
          6.1537009647079035,
          5.7765845655012145,
          5.55122548534526,
          5.464921099159151,
          5.4253997267139775,
          5.370499647579433,
          5.3270872719815126,
          5.29350984043647,
          5.254526700757202,
          5.204757281487078,
          5.200932131804145,
          5.145871384691292,
          5.127606172147153,
          5.09881790652095
        ],
        "w_best": [
          -0.13938840000000002,
          -0.10106520000000001
        ],
        "b_best": 0.966,
        "error_best": 5.09881790652095
      }
    ],
    "sin": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ]
        ],
        "sesgos": [
          0.0,
          0.0
        ],
        "errores": [
          5.5
        ],
        "w_best": [
          0.0,
          0.0
        ],
        "b_best": 0.0,
        "error_best": 5.5
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.053814,
            0.092234
          ],
          [
            -0.00032999999999999696,
            0.019987999999999992
          ],
          [
            -0.054726,
            0.014499999999999971
          ],
          [
            -0.07758599999999999,
            0.08359199999999997
          ],
          [
            -0.10436799999999999,
            0.12027399999999996
          ],
          [
            -0.143894,
            0.058233999999999966
          ],
          [
            -0.129606,
            0.08842799999999996
          ],
          [
            -0.219886,
            0.10085599999999996
          ],
          [
            -0.30690799999999996,
            0.12970599999999996
          ],
          [
            -0.25309399999999993,
            0.22193999999999997
          ],
          [
            -0.3194019999999999,
            0.19658199999999998
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          8.47053392486331,
          5.524536735389683,
          4.8677323530250725,
          4.585816399802805,
          4.466320173192804,
          4.000718256763596,
          3.891034372145311,
          3.400469858297026,
          3.322976213353225,
          3.0911367418896867,
          2.3938264811985515
        ],
        "w_best": [
          -0.3194019999999999,
          0.19658199999999998
        ],
        "b_best": 0.0,
        "error_best": 2.3938264811985515
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.0061208,
            0.0011126
          ],
          [
            -0.0061459999999999996,
            0.007788400000000001
          ],
          [
            -0.0161058,
            -0.002207999999999998
          ],
          [
            -0.017940199999999996,
            0.0079628
          ],
          [
            -0.021696799999999995,
            0.007295599999999999
          ],
          [
            -0.023704799999999995,
            0.009912599999999999
          ],
          [
            -0.025773999999999995,
            0.011158999999999997
          ],
          [
            -0.030352399999999995,
            0.010385999999999996
          ],
          [
            -0.028915799999999995,
            0.0180824
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          5.419549066031183,
          5.410903197332112,
          5.3180332033127415,
          5.259247625624209,
          5.217663687129042,
          5.186459004734396,
          5.1590684873871595,
          5.111853699189735,
          5.105499899212102
        ],
        "w_best": [
          -0.028915799999999995,
          0.0180824
        ],
        "b_best": 0.0,
        "error_best": 5.105499899212102
      }
    ]
  },
  "Dataset4": {
    "con": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.31328,
            0.32371999999999995
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          1.0
        ],
        "errores": [
          12.0,
          7.308803345482449
        ],
        "w_best": [
          -0.31328,
          0.32371999999999995
        ],
        "b_best": 1.0,
        "error_best": 7.308803345482449
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.08514200000000001,
            -0.039862
          ],
          [
            -0.17028400000000002,
            -0.079724
          ],
          [
            -0.23659200000000002,
            -0.045082000000000004
          ],
          [
            -0.28158000000000005,
            -0.050746
          ],
          [
            -0.3083620000000001,
            0.025936000000000008
          ],
          [
            -0.3149300000000001,
            0.04688000000000001
          ],
          [
            -0.36525000000000013,
            0.116728
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.98,
          0.96,
          0.94,
          0.9199999999999999,
          0.9199999999999999,
          0.9199999999999999,
          0.8799999999999999
        ],
        "errores": [
          12.0,
          7.654259041129407,
          5.500307953317631,
          4.377481153317931,
          4.284631545849487,
          3.28758615885141,
          3.103148332869107,
          2.5612291356116006
        ],
        "w_best": [
          -0.36525000000000013,
          0.116728
        ],
        "b_best": 0.8799999999999999,
        "error_best": 2.5612291356116006
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.0039526,
            -0.004203999999999999
          ],
          [
            -0.0124668,
            -0.0081902
          ],
          [
            -0.0233452,
            -0.0083966
          ],
          [
            -0.0272978,
            -0.0126006
          ],
          [
            -0.0397228,
            -0.0162338
          ],
          [
            -0.0451372,
            -0.0214584
          ],
          [
            -0.0490898,
            -0.0256624
          ],
          [
            -0.0590496,
            -0.0296588
          ],
          [
            -0.0690094,
            -0.033655199999999996
          ],
          [
            -0.0744238,
            -0.03887979999999999
          ],
          [
            -0.0868488,
            -0.042512999999999995
          ],
          [
            -0.0908014,
            -0.046716999999999995
          ],
          [
            -0.10322640000000001,
            -0.0503502
          ],
          [
            -0.10717900000000001,
            -0.0545542
          ],
          [
            -0.11569320000000001,
            -0.0585404
          ],
          [
            -0.11964580000000001,
            -0.0627444
          ],
          [
            -0.13207080000000002,
            -0.06637760000000001
          ],
          [
            -0.1444958,
            -0.07001080000000001
          ],
          [
            -0.1544556,
            -0.07400720000000001
          ],
          [
            -0.1629698,
            -0.0779934
          ],
          [
            -0.1738482,
            -0.0781998
          ],
          [
            -0.1778008,
            -0.0824038
          ],
          [
            -0.186315,
            -0.08639
          ],
          [
            -0.1902676,
            -0.090594
          ],
          [
            -0.198198,
            -0.09232619999999998
          ],
          [
            -0.2002672,
            -0.08907979999999999
          ],
          [
            -0.2067358,
            -0.08979139999999998
          ],
          [
            -0.2013466,
            -0.07789099999999997
          ],
          [
            -0.19595739999999998,
            -0.06599059999999997
          ],
          [
            -0.2013718,
            -0.07121519999999996
          ]
        ],
        "sesgos": [
          1.0,
          1.0,
          0.998,
          0.996,
          0.994,
          0.992,
          0.99,
          0.988,
          0.986,
          0.984,
          0.982,
          0.98,
          0.978,
          0.976,
          0.974,
          0.972,
          0.97,
          0.968,
          0.966,
          0.964,
          0.962,
          0.96,
          0.958,
          0.956,
          0.954,
          0.952,
          0.948,
          0.946,
          0.942,
          0.944,
          0.946,
          0.944
        ],
        "errores": [
          12.0,
          11.689152285633071,
          11.170045112993161,
          10.628983024596803,
          10.354359358420648,
          9.727804032267242,
          9.405561484538476,
          9.170221280822554,
          8.71253233162833,
          8.28227207056241,
          8.027868140485094,
          7.566528333151935,
          7.4018769244600975,
          6.995528879968003,
          6.858216133108574,
          6.608609550965562,
          6.494682280097072,
          6.189758397352021,
          5.921775624161766,
          5.738016916491091,
          5.60570018928357,
          5.429338267087104,
          5.40343901726385,
          5.327797167979954,
          5.325283394147638,
          5.26087775115979,
          5.1991420928388,
          5.1488475155036175,
          5.054926637377799,
          4.999651687022261,
          4.983480370979983
        ],
        "w_best": [
          -0.2013718,
          -0.07121519999999996
        ],
        "b_best": 0.944,
        "error_best": 4.983480370979983
      }
    ],
    "sin": [
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.53892,
            1.19004
          ],
          [
            -0.54892,
            1.1694
          ],
          [
            -1.09036,
            0.64694
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          178.83942690100747,
          34.45937784045007,
          32.31318878754788
        ],
        "w_best": [
          -1.09036,
          0.64694
        ],
        "b_best": 0.0,
        "error_best": 32.31318878754788
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            -0.054891999999999996,
            0.11694
          ],
          [
            -0.094418,
            0.0749
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          3.8389673710845007,
          3.686700096679152
        ],
        "w_best": [
          -0.094418,
          0.0749
        ],
        "b_best": 0.0,
        "error_best": 3.686700096679152
      },
      {
        "pesos": [
          [
            0.0,
            0.0
          ],
          [
            0.0,
            0.0
          ],
          [
            0.0053892,
            0.0119004
          ],
          [
            0.0014366000000000006,
            0.007696400000000001
          ],
          [
            -0.002515999999999999,
            0.0034924000000000014
          ],
          [
            -0.0010793999999999986,
            0.011188800000000002
          ],
          [
            -0.006493799999999998,
            0.005964200000000003
          ]
        ],
        "sesgos": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "errores": [
          5.5,
          5.442260563531301,
          5.429160018518254,
          5.424138428636548,
          5.354905903803933,
          5.342508415932672
        ],
        "w_best": [
          -0.006493799999999998,
          0.005964200000000003
        ],
        "b_best": 0.0,
        "error_best": 5.342508415932672
      }
    ]
  }
};
// =================== FIN DATOS EMBEBIDOS ===================

// Puntos de los datasets (debes completar los 4 datasets)
const puntos = {
  "Dataset1": {
    X: [[1.1946,3.9502],[0.8788,1.6595],[1.1907,1.6117],[1.4180,3.8272],[0.2032,1.9208],[2.7571,1.9931],[4.7125,2.8166],[3.9392,1.1032],[1.2072,0.6123],[3.4799,1.9982],[0.4763,0.1020]],
    y: [1,1,1,1,1,-1,-1,-1,-1,-1,-1]
  },
  "Dataset2": {
    X: [[1.1946,5.9502],[0.8788,3.6595],[1.1907,3.6117],[1.4180,5.8272],[0.2032,3.9208],[2.7571,3.9931],[4.7125,4.8166],[3.9392,3.1032],[1.2072,2.6123],[3.4799,3.9982],[0.4763,2.1020]],
    y: [1,1,1,1,1,-1,-1,-1,-1,-1,-1]
  },
  "Dataset3": {
    X: [[2.6946,6.9502],[2.3788,4.6595],[2.6907,4.6117],[2.9180,6.8272],[1.7032,4.9208],[4.2571,4.9931],[6.2125,5.8166],[5.4392,4.1032],[2.7072,3.6123],[4.9799,4.9982],[1.9763,3.1020]],
    y: [1,1,1,1,1,-1,-1,-1,-1,-1,-1]
  },
  "Dataset4": {
    X: [[2.6946,5.9502],[2.3788,3.6595],[2.6907,3.6117],[2.9180,5.8272],[1.7032,3.9208],[4.2571,1.9931],[6.2125,1.8166],[5.4392,0.1032],[2.7072,2.6123],[4.9799,1.9982],[1.9763,2.1020]],
    y: [1,1,1,1,1,-1,-1,-1,-1,-1,-1]
  }
};

// =================== RESTO DEL SCRIPT ===================
(function() {
  const tabButtons = document.getElementById('tabButtons');
  const tabContents = document.getElementById('tabContents');
  let first = true;
  for (const dname in datasets) {
    const btn = document.createElement('button');
    btn.className = 'tablinks';
    btn.textContent = dname.replace('Dataset', 'Dataset ');
    btn.onclick = (evt) => openDataset(evt, dname);
    tabButtons.appendChild(btn);

    const div = document.createElement('div');
    div.id = dname;
    div.className = 'tabcontent';
    div.innerHTML = `
      <h2>${dname.replace('Dataset', 'Dataset ')}</h2>
      <div class="controls">
        <label>Learning rate:
          <select id="lr_${dname}"></select>
        </label>
        <label>
          <input type="checkbox" id="sesgo_${dname}" checked> Usar sesgo
        </label>
        <br>
        Iteración: <input type="range" id="slider_${dname}" min="0" value="0" step="1">
        <span id="iter_${dname}">0</span>
        <button onclick="showBest('${dname}')">Mostrar Mejor Peso</button>
      </div>
      <div id="plot_${dname}" class="plot-container"></div>
      <div id="info_${dname}"></div>
    `;
    tabContents.appendChild(div);

    first && (btn.className += " active");
    first && (div.style.display = "block");
    first = false;
  }

  for (const dname in datasets) {
    const lrs = datasets[dname].con.length; // asume 3 learning rates
    const lrSelect = document.getElementById(`lr_${dname}`);
    ["0.1", "0.01", "0.001"].forEach((lr, idx) => {
      const opt = document.createElement('option');
      opt.value = idx;
      opt.textContent = lr;
      lrSelect.appendChild(opt);
    });
    lrSelect.onchange = () => updatePlot(dname);

    document.getElementById(`sesgo_${dname}`).onchange = () => updatePlot(dname);
    document.getElementById(`slider_${dname}`).oninput = function() {
      document.getElementById(`iter_${dname}`).textContent = this.value;
      updatePlot(dname);
    };
  }

  window.openDataset = function(evt, datasetName) {
    let tabcontent = document.getElementsByClassName("tabcontent");
    for (let i=0; i<tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
    let tablinks = document.getElementsByClassName("tablinks");
    for (let i=0; i<tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
    document.getElementById(datasetName).style.display = "block";
    evt.currentTarget.className += " active";
    updatePlot(datasetName);
  };

  window.updatePlot = function(datasetName, showBestFlag=false) {
    const data = datasets[datasetName];
    const lrIdx = document.getElementById(`lr_${datasetName}`).value;
    const usarSesgo = document.getElementById(`sesgo_${datasetName}`).checked;
    const biasKey = usarSesgo ? "con" : "sin";
    const results = data[biasKey][lrIdx];

    const X = puntos[datasetName].X;
    const y = puntos[datasetName].y;

    const slider = document.getElementById(`slider_${datasetName}`);
    slider.max = results.pesos.length - 1;
    let iter = parseInt(slider.value);
    document.getElementById(`iter_${datasetName}`).textContent = iter;

    let traces = [];
    const puntosPos = X.filter((_,i) => y[i]===1);
    const puntosNeg = X.filter((_,i) => y[i]===-1);

    traces.push({
      x: puntosPos.map(p=>p[0]),
      y: puntosPos.map(p=>p[1]),
      mode: "markers",
      marker: {color: "blue"},
      name: "Clase +1"
    });
    traces.push({
      x: puntosNeg.map(p=>p[0]),
      y: puntosNeg.map(p=>p[1]),
      mode: "markers",
      marker: {color: "red"},
      name: "Clase -1"
    });

    const w = results.pesos[iter];
    const b = results.sesgos[iter];

    const xMin = Math.min(...X.map(p=>p[0])) - 1;
    const xMax = Math.max(...X.map(p=>p[0])) + 1;
    const x_vals = [xMin, xMax];
    const y_vals = x_vals.map(x => (-w[0]*x - b)/w[1]);
    traces.push({
      x: x_vals,
      y: y_vals,
      mode: "lines",
      line: {color:"black", dash:"dash"},
      name: "Hiperplano"
    });

    // Dibuja el vector w desde el origen
    const w_norm = Math.sqrt(w[0]*w[0] + w[1]*w[1]);
    const scale = 2; // Puedes ajustar la longitud visual del vector
    traces.push({
      x: [0, w[0]/w_norm*scale],
      y: [0, w[1]/w_norm*scale],
      mode: "lines+markers",
      marker: {color: "green", size: 8},
      line: {color: "green", width: 4},
      name: "Vector w"
    });

    if(showBestFlag){
      const w_best = results.w_best;
      const b_best = results.b_best;
      const y_best = x_vals.map(x => (-w_best[0]*x - b_best)/w_best[1]);
      traces.push({
        x: x_vals,
        y: y_best,
        mode: "lines",
        line: {color:"orange", dash:"dot", width:4},
        name: "Hiperplano mejor w"
      });
    }

    Plotly.newPlot(`plot_${datasetName}`, traces, {
      xaxis: {range: [-2, 8]},   // Escala fija en X
      yaxis: {range: [-2, 8]},   // Escala fija en Y
      width:700, height:600,
      title: datasetName
    });

    document.getElementById(`info_${datasetName}`).innerHTML = `
      <b>Iteración:</b> ${iter}<br>
      <b>w:</b> [${w.map(v=>v.toFixed(3))}]<br>
      <b>b:</b> ${b.toFixed(3)}<br>
      <b>Fórmula:</b> ${w[0].toFixed(3)}*x1 + ${w[1].toFixed(3)}*x2 + ${b.toFixed(3)} = 0
    `;
  };

  window.showBest = function(datasetName){
    updatePlot(datasetName,true);
  };

  document.getElementsByClassName("tablinks")[0].click();
})();
</script>

</body>
</html>
